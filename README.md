# üß† AI Pong: –ù–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π –ü–∏–Ω–≥-–ü–æ–Ω–≥ –Ω–∞ ESP32

–≠—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã **Pong**, –≥–¥–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç—å—é (MLP), —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π ¬´—Å –Ω—É–ª—è¬ª –Ω–∞ —è–∑—ã–∫–µ C++. –ë–æ—Ç –æ–±—É—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏ (Backpropagation) –∏ —Å–∏—Å—Ç–µ–º—É –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

* **–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç:** –ù–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å —Å 3 –≤—Ö–æ–¥–Ω—ã–º–∏ –Ω–µ–π—Ä–æ–Ω–∞–º–∏, —Å–∫—Ä—ã—Ç—ã–º —Å–ª–æ–µ–º –∏–∑ 4 –Ω–µ–π—Ä–æ–Ω–æ–≤ –∏ 2 –≤—ã—Ö–æ–¥–Ω—ã–º–∏ –Ω–µ–π—Ä–æ–Ω–∞–º–∏.
* **–û–±—É—á–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:** –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç ¬´–Ω–∞–≥—Ä–∞–¥—É¬ª (+1.0) –∑–∞ —É—Å–ø–µ—à–Ω—ã–π —É–¥–∞—Ä –∏ ¬´—à—Ç—Ä–∞—Ñ¬ª (-1.0) –∑–∞ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –º—è—á, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—è –≤–µ—Å–∞ –Ω–µ–π—Ä–æ–Ω–æ–≤ –ø—Ä—è–º–æ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã.
* **–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ **ReLU** –¥–ª—è —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–ª–æ—è –∏ **–°–∏–≥–º–æ–∏–¥—ã** –¥–ª—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–ª–æ—è.
* **–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∏—è `TEST` –º–æ–¥–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–µ—Å–æ–≤ –∏ FPS —á–µ—Ä–µ–∑ Serial-–ø–æ—Ä—Ç.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ù–µ–π—Ä–æ–Ω–Ω–æ–π –°–µ—Ç–∏

–°–µ—Ç—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ –¥–≤–∏–∂–µ–Ω–∏–∏ —Ä–∞–∫–µ—Ç–∫–∏:

* **–í—Ö–æ–¥—ã (Inputs):**
1. –ü–æ–∑–∏—Ü–∏—è –º—è—á–∞ –ø–æ X (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è 0.0 - 1.0).
2. –ü–æ–∑–∏—Ü–∏—è –º—è—á–∞ –ø–æ Y (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è 0.0 - 1.0).
3. –ü–æ–∑–∏—Ü–∏—è —Ä–∞–∫–µ—Ç–∫–∏ –±–æ—Ç–∞ –ø–æ Y.


* **–°–∫—Ä—ã—Ç—ã–π —Å–ª–æ–π:** 4 –Ω–µ–π—Ä–æ–Ω–∞ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π ReLU.
* **–í—ã—Ö–æ–¥—ã (Outputs):**
* –ù–µ–π—Ä–æ–Ω 1: –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –≤–≤–µ—Ä—Ö.
* –ù–µ–π—Ä–æ–Ω 2: –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –≤–Ω–∏–∑.



---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (ESP32)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–∏–Ω ESP32 | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| --- | --- | --- |
| **OLED SDA** | GPIO 21 | I2C Data |
| **OLED SCL** | GPIO 22 | I2C Clock |
| **–ö–Ω–æ–ø–∫–∞ –í–≤–µ—Ä—Ö** | GPIO 26 | –ü–æ–¥—Ç—è–∂–∫–∞ –∫ 3.3V —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä |
| **–ö–Ω–æ–ø–∫–∞ –í–Ω–∏–∑** | GPIO 27 | –ü–æ–¥—Ç—è–∂–∫–∞ –∫ 3.3V —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä |
| **–®—É–º (Seed)** | GPIO 36 (A0) | –û—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º (–¥–ª—è —Ä–∞–Ω–¥–æ–º–∞) |

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∫–æ–¥–∞

### –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—É—á–µ–Ω–∏—è

–í –∫–æ–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `trainAI()`, –∫–æ—Ç–æ—Ä–∞—è:

1. –í—ã—á–∏—Å–ª—è–µ—Ç –æ—à–∏–±–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `reward`.
2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –∏ —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–ª–æ–µ–≤.
3. –û–±–Ω–æ–≤–ª—è–µ—Ç –º–∞—Ç—Ä–∏—Ü—ã –≤–µ—Å–æ–≤ `inputWeight` –∏ `hidenWeight` —Å —É—á–µ—Ç–æ–º `learningRate` (0.1).

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ—Å–æ–≤

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ñ—É–Ω–∫—Ü–∏—è `setupAI()` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç—å —Å–ª—É—á–∞–π–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è —à—É–º —Å –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ –≤—Ö–æ–¥–∞ `A0`. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∏–≥—Ä–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –±–æ—Ç–∞ –±—É–¥–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–î–µ—Ñ–∞–π–Ω—ã)

* `ballSpeed`: –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –º—è—á–∞ (–º—Å –∑–∞ —à–∞–≥).
* `botWallSpeed`: –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ —Ä–∞–∫–µ—Ç–∫–∏ –±–æ—Ç–∞.
* `TEST`: –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ `1`, –≤ Serial –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è —Ç–µ–∫—É—â–∏–µ –≤–µ—Å–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏.

---

## üéÆ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç –≤–µ–¥–µ—Ç —Å–µ–±—è —Ö–∞–æ—Ç–∏—á–Ω–æ (—Å–ª—É—á–∞–π–Ω—ã–µ –≤–µ—Å–∞).
2. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã –∑–∞–±–∏–≤–∞–µ—Ç–µ –≥–æ–ª, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `trainAI()` —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –Ω–∞–≥—Ä–∞–¥–æ–π. –ë–æ—Ç –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–≤–µ–ª–∏ –∫ –ø—Ä–æ–∏–≥—Ä—ã—à—É.
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –±–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç ¬´–ø–æ–Ω–∏–º–∞—Ç—å¬ª —Å–≤—è–∑—å –º–µ–∂–¥—É –ø–æ–ª–æ–∂–µ–Ω–∏–µ–º –º—è—á–∞ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å—é –¥–≤–∏–≥–∞—Ç—å —Ä–∞–∫–µ—Ç–∫—É.
4. –ß–µ—Ä–µ–∑ 10-20 —Ü–∏–∫–ª–æ–≤ –æ–±—É—á–µ–Ω–∏—è –±–æ—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–µ—Ä—å–µ–∑–Ω—ã–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–º.

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* `Adafruit_SSD1306`
* `Adafruit_GFX`

---
